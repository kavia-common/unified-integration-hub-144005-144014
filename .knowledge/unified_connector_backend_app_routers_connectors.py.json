{"is_source_file": true, "format": "Python", "description": "This Python source file defines API routes for handling connector operations within a FastAPI application. It includes endpoints for OAuth login flow, OAuth callback, resource search, creating Jira issues and Confluence pages, listing Jira projects and Confluence spaces, and deleting connector connections. The file interacts with connector classes, dependency injections, and includes route-specific logic and exception handling.", "external_files": ["../connectors/registry", "../connectors/jira", "../connectors/confluence", "../db/mongo"], "external_methods": ["make_connectors_router", "get_connector", "get_tenant", "list_connectors", "JiraConnector", "ConfluenceConnector", "delete_connection"], "published": ["router", "OAuthLoginResponse", "OAuthCallbackResponse", "SearchResponse", "JiraCreateIssue", "ConfluenceCreatePage"], "classes": [{"name": "OAuthLoginResponse", "description": "Response model containing the OAuth provider authorization URL and CSRF state."}, {"name": "OAuthCallbackResponse", "description": "Simple response indicating successful OAuth callback handling."}, {"name": "SearchResponse", "description": "Model encapsulating search result items."}, {"name": "JiraCreateIssue", "description": "Data model for creating a Jira issue, including project key, summary, and optional description."}, {"name": "ConfluenceCreatePage", "description": "Data model for creating a Confluence page, including space key, title, and body."}], "methods": [{"name": "oauth_login(connector_id: str, return_url: Optional[str] = Query(None), tenant: TenantContext = Depends(get_tenant))", "description": "Initiates OAuth flow by generating a CSRF token, storing state, and returning the authorization URL.", "scope": "", "scopeKind": ""}, {"name": "oauth_callback(connector_id: str, code: str = Query(...), state: str = Query(...))", "description": "Processes the OAuth provider callback, validates state, and exchanges code for tokens.", "scope": "", "scopeKind": ""}, {"name": "search(connector_id: str, q: str = Query(..., description=\"Query string\"), resource: str = Query(..., description=\"Resource type\"), page: int = 1, per_page: int = 20, tenant: TenantContext = Depends(get_tenant))", "description": "Performs a normalized search for resources using the specified connector.", "scope": "", "scopeKind": ""}, {"name": "create_jira_issue(payload: JiraCreateIssue, tenant: TenantContext = Depends(get_tenant))", "description": "Creates a Jira issue using provided project key, summary, and optional description.", "scope": "", "scopeKind": ""}, {"name": "create_conf_page(payload: ConfluenceCreatePage, tenant: TenantContext = Depends(get_tenant))", "description": "Creates a Confluence page with given space key, title, and body.", "scope": "", "scopeKind": ""}, {"name": "list_jira_projects(tenant: TenantContext = Depends(get_tenant))", "description": "Lists available Jira projects.", "scope": "", "scopeKind": ""}, {"name": "list_conf_spaces(tenant: TenantContext = Depends(get_tenant))", "description": "Lists available Confluence spaces.", "scope": "", "scopeKind": ""}, {"name": "delete_conn(connector_id: str, tenant: TenantContext = Depends(get_tenant))", "description": "Deletes a connector connection, revoking stored credentials.", "scope": "", "scopeKind": ""}], "calls": ["get_connector", "get_tenant", "connector.get_oauth_authorize_url", "connector.exchange_code_for_tokens", "connector.search", "JIRA.create", "CONFLUENCE.create", "JIRA.list_supporting", "CONFLUENCE.list_supporting", "delete_connection"], "search-terms": ["FastAPI routes", "connectors", "OAuth", "Jira", "Confluence", "OAuth flow", "create issue", "create page", "list projects", "list spaces", "delete connection"], "state": 2, "file_id": 11, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "CONFLUENCE", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^CONFLUENCE = ConfluenceConnector()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ConfluenceCreatePage", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^class ConfluenceCreatePage(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JIRA", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^JIRA = JiraConnector()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JiraCreateIssue", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^class JiraCreateIssue(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OAuthCallbackResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^class OAuthCallbackResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OAuthLoginResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^class OAuthLoginResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "STATE_STORE", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^STATE_STORE: Dict[str, str] = {}$/", "language": "Python", "typeref": "typename:Dict[str, str]", "kind": "variable"}, {"_type": "tag", "name": "SearchResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^class SearchResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "authorize_url", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    authorize_url: str = Field(..., description=\"URL to redirect user for provider OAuth\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "OAuthLoginResponse", "scopeKind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    body: Optional[str] = Field(\"\", description=\"Page body (storage)\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ConfluenceCreatePage", "scopeKind": "class"}, {"_type": "tag", "name": "create_conf_page", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def create_conf_page(payload: ConfluenceCreatePage, tenant: TenantContext = Depends(get_te/", "language": "Python", "kind": "function", "signature": "(payload: ConfluenceCreatePage, tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "create_jira_issue", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def create_jira_issue(payload: JiraCreateIssue, tenant: TenantContext = Depends(get_tenant/", "language": "Python", "kind": "function", "signature": "(payload: JiraCreateIssue, tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "delete_conn", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def delete_conn(connector_id: str, tenant: TenantContext = Depends(get_tenant)):$/", "language": "Python", "kind": "function", "signature": "(connector_id: str, tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Issue description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "JiraCreateIssue", "scopeKind": "class"}, {"_type": "tag", "name": "list_conf_spaces", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def list_conf_spaces(tenant: TenantContext = Depends(get_tenant)):$/", "language": "Python", "kind": "function", "signature": "(tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "list_jira_projects", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def list_jira_projects(tenant: TenantContext = Depends(get_tenant)):$/", "language": "Python", "kind": "function", "signature": "(tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "oauth_callback", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def oauth_callback(connector_id: str, code: str = Query(...), state: str = Query(...)):$/", "language": "Python", "kind": "function", "signature": "(connector_id: str, code: str = Query(...), state: str = Query(...))"}, {"_type": "tag", "name": "oauth_login", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def oauth_login(connector_id: str, return_url: Optional[str] = Query(None), tenant: Tenant/", "language": "Python", "kind": "function", "signature": "(connector_id: str, return_url: Optional[str] = Query(None), tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "project_key", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    project_key: str = Field(..., description=\"Jira project key\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "JiraCreateIssue", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^async def search(connector_id: str, q: str = Query(..., description=\"Query string\"), resource: s/", "language": "Python", "kind": "function", "signature": "(connector_id: str, q: str = Query(..., description=\"Query string\"), resource: str = Query(..., description=\"Resource type\"), page: int = 1, per_page: int = 20, tenant: TenantContext = Depends(get_tenant))"}, {"_type": "tag", "name": "space_key", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    space_key: str = Field(..., description=\"Confluence space key\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ConfluenceCreatePage", "scopeKind": "class"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    state: str = Field(..., description=\"CSRF state\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "OAuthLoginResponse", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    status: str = \"ok\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "OAuthCallbackResponse", "scopeKind": "class"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    summary: str = Field(..., description=\"Issue summary\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "JiraCreateIssue", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/routers/connectors.py", "pattern": "/^    title: str = Field(..., description=\"Page title\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ConfluenceCreatePage", "scopeKind": "class"}], "hash": "5ba660a0464e713e2605c604920b1289", "format-version": 4, "code-base-name": "unified_connector_backend", "filename": "unified_connector_backend/app/routers/connectors.py", "fields": [{"name": "CONFLUENCE = ConfluenceConnector()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JIRA = JiraConnector()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, str] STATE_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str authorize_url", "scope": "OAuthLoginResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] body", "scope": "ConfluenceCreatePage", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "JiraCreateIssue", "scopeKind": "class", "description": "unavailable"}, {"name": "str project_key", "scope": "JiraCreateIssue", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str space_key", "scope": "ConfluenceCreatePage", "scopeKind": "class", "description": "unavailable"}, {"name": "str state", "scope": "OAuthLoginResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "OAuthCallbackResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str summary", "scope": "JiraCreateIssue", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "ConfluenceCreatePage", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"23": ""}]}