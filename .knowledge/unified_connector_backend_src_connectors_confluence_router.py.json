{"is_source_file": true, "format": "Python", "description": "This file defines a Confluence connector for integrating with Confluence via its API, including OAuth authentication, searching pages, listing spaces, and creating pages. It uses FastAPI for exposing API endpoints related to Confluence operations.", "external_files": ["src.connectors.base", "src.core.db", "src.core.logging", "src.core.security", "src.core.settings", "src.core.token_store", "src.core.tenants", "src.core.response", "src.core.api_models", ".client", ".mapping"], "external_methods": ["generate_pkce", "verify_csrf_state", "compute_expiry", "ok", "auth_required_error", "config_required_error", "normalize_upstream_error", "validation_error", "get_tenant_id"], "published": ["get_router", "factory"], "classes": [{"name": "ConfluenceConnector", "description": "A class implementing the logic to interact with Confluence's API, handle OAuth flows, search pages, list spaces, create pages, and manage tokens."}], "methods": [{"name": "Dict[str,Any] get_public_info(self)", "description": "Returns basic public information about the connector, including its ID and name.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "OAuthLoginResponse oauth_login(self, redirect_to: Optional[str] = None)", "description": "Generates the OAuth authorization URL with PKCE and CSRF state, initiating the OAuth login process.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "oauth_callback(self, code: str, state: Optional[str])", "description": "Handles OAuth callback, exchanges authorization code for tokens, and stores tokens securely.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] search(self, params: SearchParams)", "description": "Performs a search for Confluence pages based on query parameters, supporting pagination via cursor.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "connect(self)", "description": "Checks if the connector has valid authorized tokens and is connected.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "disconnect(self)", "description": "Removes stored tokens and disconnects the connector.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "__init__(self, tenant_id: str)", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] _get_cloud_id(connector: \"ConfluenceConnector\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_page(payload: ConfluenceCreatePageModel, tenant_id: str = Depends(get_tenant_id))", "scope": "get_router", "scopeKind": "function", "description": "unavailable"}, {"name": "ConfluenceConnector factory(tenant_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "APIRouter get_router()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_spaces(tenant_id: str = Depends(get_tenant_id))", "scope": "get_router", "scopeKind": "function", "description": "unavailable"}], "calls": ["src.connectors.base.BaseConnector.__init__", "src.core.settings.get_settings", "src.core.security.generate_pkce", "src.core.security.generate_csrf_state", "src.core.security.verify_csrf_state", "src.core.security.compute_expiry", "src.core.token_store.TokenStore.save_tokens", "src.core.token_store.TokenStore.ensure_valid_token_atlassian", "src.core.response.ok", "src.core.response.auth_required_error", "src.core.response.config_required_error", "src.core.response.normalize_upstream_error", "src.core.response.validation_error", "src.core.tenants.get_tenant_id", "src.client.ConfluenceClient.search_pages", "src.client.ConfluenceClient.list_spaces", "src.client.ConfluenceClient.create_page"], "search-terms": ["Confluence", "OAuth", "search_pages", "list_spaces", "create_page", "APIRouter", "confluence", "router", "tenant_collection"], "state": 2, "file_id": 18, "knowledge_revision": 105, "git_revision": "7d15ced419e8f88a8eb26d6e8f636ff1ac2ce571", "revision_history": [{"37": ""}, {"49": "d003e778e8476d42a3bfd185a6f01fbb63bf40e2"}, {"56": "379774def9059dafe18d2301fc45048fa432be1e"}, {"67": "379774def9059dafe18d2301fc45048fa432be1e"}, {"71": "35f8cee06127abfa45ba15d76ea15219c4e0d3bf"}, {"96": "35f8cee06127abfa45ba15d76ea15219c4e0d3bf"}, {"97": "35f8cee06127abfa45ba15d76ea15219c4e0d3bf"}, {"98": "35f8cee06127abfa45ba15d76ea15219c4e0d3bf"}, {"101": "7d15ced419e8f88a8eb26d6e8f636ff1ac2ce571"}, {"104": "7d15ced419e8f88a8eb26d6e8f636ff1ac2ce571"}, {"105": "7d15ced419e8f88a8eb26d6e8f636ff1ac2ce571"}], "ctags": [{"_type": "tag", "name": "ConfluenceConnector", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^class ConfluenceConnector(BaseConnector):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    def __init__(self, tenant_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_get_cloud_id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^def _get_cloud_id(connector: \"ConfluenceConnector\") -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(connector: \"ConfluenceConnector\")"}, {"_type": "tag", "name": "connect", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def connect(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "create_page", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def create_page(payload: ConfluenceCreatePageModel, tenant_id: str = Depends(get_tenan/", "file": true, "language": "Python", "kind": "function", "signature": "(payload: ConfluenceCreatePageModel, tenant_id: str = Depends(get_tenant_id))", "scope": "get_router", "scopeKind": "function"}, {"_type": "tag", "name": "disconnect", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def disconnect(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "factory", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^def factory(tenant_id: str) -> ConfluenceConnector:$/", "language": "Python", "typeref": "typename:ConfluenceConnector", "kind": "function", "signature": "(tenant_id: str)"}, {"_type": "tag", "name": "get_public_info", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    def get_public_info(self) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "get_router", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^def get_router() -> APIRouter:$/", "language": "Python", "typeref": "typename:APIRouter", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    id = \"confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "list_spaces", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def list_spaces(tenant_id: str = Depends(get_tenant_id)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(tenant_id: str = Depends(get_tenant_id))", "scope": "get_router", "scopeKind": "function"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    name = \"Confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "oauth_callback", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def oauth_callback(self, code: str, state: Optional[str]):$/", "language": "Python", "kind": "member", "signature": "(self, code: str, state: Optional[str])", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "oauth_login", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def oauth_login(self, redirect_to: Optional[str] = None) -> OAuthLoginResponse:$/", "language": "Python", "typeref": "typename:OAuthLoginResponse", "kind": "member", "signature": "(self, redirect_to: Optional[str] = None)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/src/connectors/confluence/router.py", "pattern": "/^    async def search(self, params: SearchParams) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, params: SearchParams)", "scope": "ConfluenceConnector", "scopeKind": "class"}], "hash": "bd447a98e384cdca1ae5e710e4a48338", "format-version": 4, "code-base-name": "unified_connector_backend", "filename": "unified_connector_backend/src/connectors/confluence/router.py", "fields": [{"name": "id = \"confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "name = \"Confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}