{"is_source_file": true, "format": "Python", "description": "This file implements a Confluence connector class for interacting with Atlassian's Confluence API. It provides methods for OAuth authentication, searching content, creating pages, and listing spaces, utilizing HTTP requests with async support and encryption for tokens.", "external_files": ["../db/mongo", "../security/crypto", ".base"], "external_methods": ["upsert_connection", "get_connection", "encrypt_str", "decrypt_str"], "published": ["ConfluenceConnector"], "classes": [{"name": "ConfluenceConnector", "description": "A class that manages authentication and operations with Confluence APIs, including OAuth flow, search, create, and listing spaces."}], "methods": [{"name": "OAuthAuthorize get_oauth_authorize_url(self, tenant_id: str, state: str)", "description": "Generates the URL to initiate OAuth authorization with Confluence for a specific tenant.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] exchange_code_for_tokens(self, tenant_id: str, code: str, state: str)", "description": "Exchanges an OAuth authorization code for access and refresh tokens, storing the encrypted tokens in the database.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] _get_auth(self, tenant_id: str)", "description": "Retrieves and decrypts the stored access and refresh tokens for a tenant.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "search(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: int = 20)", "description": "Performs a search query within Confluence content, returning a list of matched pages.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "CreateResult create(self, tenant_id: str, resource: str, payload: Dict[str, Any])", "description": "Creates a new Confluence page with specified space, title, and body content.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "list_supporting(self, tenant_id: str, resource: str)", "description": "Lists spaces available in Confluence when resource parameter is 'spaces'.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "_client_id()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_client_secret()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_redirect_uri()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["httpx.AsyncClient", "res.raise_for_status", "res.json", "upsert_connection", "get_connection", "encrypt_str", "decrypt_str"], "search-terms": ["Confluence", "OAuth", "API", "search", "create page", "spaces", "tenant_id", "access_token"], "state": 2, "file_id": 10, "knowledge_revision": 21, "git_revision": "", "ctags": [{"_type": "tag", "name": "CONF_API_ROOT", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^CONF_API_ROOT = \"https:\\/\\/api.atlassian.com\\/ex\\/confluence\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "CONF_AUTH_URL", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^CONF_AUTH_URL = \"https:\\/\\/auth.atlassian.com\\/authorize\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "CONF_TOKEN_URL", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^CONF_TOKEN_URL = \"https:\\/\\/auth.atlassian.com\\/oauth\\/token\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ConfluenceConnector", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^class ConfluenceConnector(BaseConnector):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SCOPES", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^SCOPES = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_client_id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^def _client_id():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_client_secret", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^def _client_secret():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_auth", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def _get_auth(self, tenant_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, tenant_id: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_redirect_uri", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^def _redirect_uri():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def create(self, tenant_id: str, resource: str, payload: Dict[str, Any]) -> CreateResu/", "language": "Python", "typeref": "typename:CreateResult", "kind": "member", "signature": "(self, tenant_id: str, resource: str, payload: Dict[str, Any])", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    display_name = \"Confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "exchange_code_for_tokens", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def exchange_code_for_tokens(self, tenant_id: str, code: str, state: str) -> Dict[str,/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, tenant_id: str, code: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "get_oauth_authorize_url", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def get_oauth_authorize_url(self, tenant_id: str, state: str) -> OAuthAuthorize:$/", "language": "Python", "typeref": "typename:OAuthAuthorize", "kind": "member", "signature": "(self, tenant_id: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    id = \"confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "list_supporting", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def list_supporting(self, tenant_id: str, resource: str):$/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, resource: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "required_scopes", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    required_scopes = SCOPES$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    async def search(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: i/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: int = 20)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "supports_oauth", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence.py", "pattern": "/^    supports_oauth = True$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}], "hash": "6b48d010425a161a99f9919b4ffbbaf3", "format-version": 4, "code-base-name": "unified_connector_backend", "filename": "unified_connector_backend/app/connectors/confluence.py", "fields": [{"name": "CONF_API_ROOT = \"https:\\/\\/api.atlassian.com\\/ex\\/confluence\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CONF_AUTH_URL = \"https:\\/\\/auth.atlassian.com\\/authorize\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CONF_TOKEN_URL = \"https:\\/\\/auth.atlassian.com\\/oauth\\/token\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SCOPES = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "display_name = \"Confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "id = \"confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "required_scopes = SCOPES", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "supports_oauth = True", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"21": ""}]}