{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI routes for Confluence integration, including OAuth login, callback, page search, and page creation, and a connector class for programmatic access.", "external_files": ["...connectors/base", ".client", "...connectors/registry", "...utils/errors"], "external_methods": ["build_authorize_url", "exchange_code_for_tokens", "search_pages", "create_page", "register", "http_error"], "published": ["router", "ConfluenceConnector"], "classes": [{"name": "ConfluenceConnector", "description": "A connector class implementing Confluence API operations with OAuth support."}, {"name": "OAuthLoginResponse", "description": "Response model for OAuth login URL."}, {"name": "SearchResponse", "description": "Response model for search API results."}, {"name": "CreatePageBody", "description": "Request model for creating a Confluence page."}], "methods": [{"name": "get_tenant_id()", "description": "Returns a fixed tenant ID string.", "scope": "", "scopeKind": ""}, {"name": "oauth_login(tenant_id: str = Depends(get_tenant_id), return_url: bool = True)", "description": "Builds and returns OAuth authorization URL.", "scope": "", "scopeKind": ""}, {"name": "oauth_callback(state: str, code: str, tenant_id: str = Depends(get_tenant_id))", "description": "Handles OAuth callback, exchanges code for tokens.", "scope": "", "scopeKind": ""}, {"name": "search(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: int = 20)", "description": "Performs a search for Confluence pages with query parameters.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "create_page_route(body: CreatePageBody, tenant_id: str = Depends(get_tenant_id))", "description": "Creates a new Confluence page with provided information.", "scope": "", "scopeKind": ""}, {"name": "create(self, tenant_id: str, resource: str, payload: dict)", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth_authorize_url(self, tenant_id: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth_exchange(self, tenant_id: str, code: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "search(q: str = Query(..., alias=\"q\"), resource: str = \"page\", page: int = 1, per_page: int = 20, tenant_id: str = Depends(get_tenant_id))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["build_authorize_url", "exchange_code_for_tokens", "search_pages", "create_page", "http_error"], "search-terms": ["Confluence API routes", "OAuth login", "search pages", "create page", "FastAPI router", "ConfluenceConnector", "API endpoints"], "state": 2, "file_id": 16, "knowledge_revision": 32, "git_revision": "", "ctags": [{"_type": "tag", "name": "ConfluenceConnector", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^class ConfluenceConnector(BaseConnector):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CreatePageBody", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^class CreatePageBody(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OAuthLoginResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^class OAuthLoginResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SearchResponse", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^class SearchResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    async def create(self, tenant_id: str, resource: str, payload: dict):$/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, resource: str, payload: dict)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "create_page_route", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^async def create_page_route(body: CreatePageBody, tenant_id: str = Depends(get_tenant_id)):$/", "language": "Python", "kind": "function", "signature": "(body: CreatePageBody, tenant_id: str = Depends(get_tenant_id))"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    display_name = \"Confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "get_tenant_id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^def get_tenant_id():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    id = \"confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    items: list[dict] = Field(default_factory=list)$/", "language": "Python", "typeref": "typename:list[dict]", "kind": "variable", "scope": "SearchResponse", "scopeKind": "class"}, {"_type": "tag", "name": "oauth_authorize_url", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    async def oauth_authorize_url(self, tenant_id: str, state: str):$/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "oauth_callback", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^async def oauth_callback(state: str, code: str, tenant_id: str = Depends(get_tenant_id)):$/", "language": "Python", "kind": "function", "signature": "(state: str, code: str, tenant_id: str = Depends(get_tenant_id))"}, {"_type": "tag", "name": "oauth_exchange", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    async def oauth_exchange(self, tenant_id: str, code: str, state: str):$/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, code: str, state: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "oauth_login", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^async def oauth_login(tenant_id: str = Depends(get_tenant_id), return_url: bool = True):$/", "language": "Python", "kind": "function", "signature": "(tenant_id: str = Depends(get_tenant_id), return_url: bool = True)"}, {"_type": "tag", "name": "required_scopes", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    required_scopes = CONF_SCOPES$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    async def search(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: i/", "language": "Python", "kind": "member", "signature": "(self, tenant_id: str, query: str, resource: str, page: int = 1, per_page: int = 20)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^async def search(q: str = Query(..., alias=\"q\"), resource: str = \"page\", page: int = 1, per_page/", "language": "Python", "kind": "function", "signature": "(q: str = Query(..., alias=\"q\"), resource: str = \"page\", page: int = 1, per_page: int = 20, tenant_id: str = Depends(get_tenant_id))"}, {"_type": "tag", "name": "supports_oauth", "path": "/home/kavia/workspace/code-generation/unified-integration-hub-144005-144014/unified_connector_backend/app/connectors/confluence/router.py", "pattern": "/^    supports_oauth = True$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}], "hash": "fe9c953d87477dfdf1b681932e33f4fc", "format-version": 4, "code-base-name": "unified_connector_backend", "filename": "unified_connector_backend/app/connectors/confluence/router.py", "fields": [{"name": "display_name = \"Confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "id = \"confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "list[dict] items", "scope": "SearchResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "required_scopes = CONF_SCOPES", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supports_oauth = True", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"32": ""}]}